<!DOCTYPE html>
<html>
  <head>
    <title>Around the U.S.</title>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="pages/index.css" />
  </head>
  <body class="page">
    <header class="header">
      <img src="logo.svg" alt="Around the U.S. logo" class="logo" />
    </header>

    <main class="content">
      <section class="profile">
        <div class="profile__details">
          <div class="profile__avatar">
            <img
              src="images/avatar.jpg"
              alt="Foto de perfil de Jacques Cousteau"
            />
          </div>

          <div class="profile__text">
            <div class="profile__name_edit-button">
              <h3 class="profile__name">Jacques Cousteau</h3>
              <button class="profile__edit-button" onclick="abrirPopup()">
                <img
                  src="images/edit.svg"
                  alt="Edit icon"
                  class="profile__edit-icon"
                />
              </button>
            </div>
            <span class="profile__role">Explorador</span>
          </div>

          <button class="profile__add-button">
            <img
              src="images/add.svg"
              alt="Add icon"
              class="profile__add-icon"
            />
          </button>
        </div>
      </section>

      <section class="elements"></section>
    </main>

    <footer class="footer">
      <p class="footer__copyright">&copy; 2024 Around the U.S.</p>
    </footer>

    <!-- POPUP EDIT PROFILE -->
    <div class="popup" id="edit-popup">
      <div class="popup__container">
        <button class="popup__close-button" type="button"></button>

        <h2 class="popup__title">Editar perfil</h2>

        <form class="popup__form" id="edit-form">
          <input
            type="text"
            class="popup__input"
            id="name-input"
            placeholder="Nombre"
            required
          />

          <input
            type="text"
            class="popup__input"
            id="job-input"
            placeholder="Acerca de mí"
            required
          />

          <button
            type="submit"
            class="popup__submit-button popup__submit-button_disabled"
            disabled
          >
            Guardar
          </button>
        </form>
      </div>
    </div>

    <script>
      // BOTÓN PARA ABRIR POPUP
      const openPopupButton = document.querySelector(".profile__edit-button");
      const popup = document.querySelector("#edit-popup");
      const closePopupButton = document.querySelector(".popup__close-button");

      // INPUTS
      const nameInput = document.querySelector("#name-input");
      const jobInput = document.querySelector("#job-input");

      // BOTÓN GUARDAR
      const submitButton = document.querySelector(".popup__submit-button");

      // ----- Función para abrir popup -----
      function openPopup() {
        popup.style.display = "flex";
      }

      // ----- Función para cerrar popup -----
      function closePopup() {
        popup.style.display = "none";

        // Limpiar los campos al cerrar
        nameInput.value = "";
        jobInput.value = "";
        checkInputs(); // Actualizar el estado del botón
      }

      // Eventos
      openPopupButton.addEventListener("click", openPopup);
      closePopupButton.addEventListener("click", closePopup);

      // ----- HABILITAR/DESHABILITAR BOTÓN -----
      function checkInputs() {
        if (nameInput.value.trim() !== "" && jobInput.value.trim() !== "") {
          submitButton.disabled = false;
          submitButton.classList.add("popup__submit-button_enabled");
          submitButton.classList.remove("popup__submit-button_disabled");
        } else {
          submitButton.disabled = true;
          submitButton.classList.remove("popup__submit-button_enabled");
          submitButton.classList.add("popup__submit-button_disabled");
        }
      }

      // Escucha cambios en ambos campos
      nameInput.addEventListener("input", checkInputs);
      jobInput.addEventListener("input", checkInputs);
    </script>
  </body>
</html>
